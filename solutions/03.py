from functools import reduce

INPUT = [
    ".##.....#....#....#..#.#...#.##",
    ".###........#.##....#......#..#",
    "#..#..#.....#...#....#.#.......",
    ".........#.................#...",
    "..#.......#.#.......#.......#.#",
    ".####........#.#..##.........#.",
    "........#.........#.........#..",
    "#..##...##....#.....##......#..",
    ".........#..............#......",
    "#.........#...##.........#.#...",
    "..............#........##.....#",
    "##....#...........#....#.#...#.",
    ".....#..#.....#...#.#..........",
    "#.......#...#..##........##..#.",
    ".#........#.......#............",
    ".......##.....#.#.#..#.#.......",
    "..#......#..#....##......#.#...",
    ".....##....#..#.....#..#.......",
    ".............#.......#.#....#..",
    ".................#.#......#....",
    ".#..#....#..........#.....#.##.",
    "#.#.#.#.....###.......#.....#..",
    "#...#..........#..#............",
    "...#...##.......#.##..#........",
    "..#...#.#.##...##.........#.#.#",
    ".....#...#.#....#.#.....#......",
    "...#...#.#..#...#.....#........",
    "...........###.#.......#.#.....",
    "..#..#.#........#.#.......#.#.#",
    ".#.......#...........#.........",
    ".#..#...##....#.......###..##..",
    "#....#.....#....##..#.........#",
    "#..#.......#...#......#.#....#.",
    "......##..#..#....#.#........##",
    "#.....#.........#......#..##..#",
    ".#..#.......#....#............#",
    "....#..........#.#...##....#.##",
    "..#...#.#...#.###.#..#......#..",
    "#.#...#..............#.......#.",
    "..##.......#......#....###.....",
    "......#.......#.#.##.#..##.#...",
    ".#......#......#.#....#..#.#..#",
    "....#....#..#...#.....#.#..#...",
    ".#.....#.#.#..#........#.#.###.",
    "#..#..#.#......#..#..#....#.#..",
    "..#.###....#....##...#.........",
    "...........#..#...........#....",
    ".................#..........#.#",
    ".#.#....#..#........#..#.......",
    "...........##..#...............",
    "...#.##.........#.........#.#.#",
    "........#..#....#.#............",
    "...##...##..................#.#",
    "...#..##..#...#......#.....#..#",
    ".##.#..#..#......#......#.....#",
    "....#.....#....#......##.#.....",
    ".....#.##....#...#.............",
    "......#...#.....##....#...#..##",
    "...#............#.###....##....",
    "............#.#.#...#.#........",
    "#.....#..#.#..##...........#.##",
    ".....#.#.#.#..##......##.#..#..",
    ".#.##..#.........#......#.....#",
    ".#.#.#.#.#..#..#........###....",
    "......##..........#.#.....##..#",
    "..#...#..#.....#.#.....#.......",
    "............#....#.............",
    "........#...#..#....#.#..###...",
    "#........##....##..............",
    ".........#.#.#..#..#...#.#.....",
    "....#............#....####...#.",
    "##.#.#......#.....#...#....###.",
    "...#..#..#..#.......#..#.#.#..#",
    "..#..#....#...#.##..#.........#",
    "#..#.#....#....#...#..##..#.#..",
    "...#....#.............#..#.#..#",
    "..#......#.##...#..............",
    "#....##.#.#...##......#.....##.",
    ".#...##...#...####.....##......",
    "...........#.###....#...#...#..",
    "##..#..##..#..#.#.#..###.......",
    ".#...##......#........##..#....",
    ".#...#...#.....#............#..",
    ".#.#.#...#.#..#.......#......#.",
    ".................#..#.#......#.",
    "#..#####......##.#....#...#....",
    "........#......#.....##......#.",
    "....#.#...#...#..#.......#####.",
    ".....##......#...#.......#....#",
    ".#....#...#..#...#.#...#..#...#",
    "....##.........#.#...####.#....",
    "...##..........#.#.......##....",
    ".........#......#.....#....#...",
    "#....##..#......#.....##....#..",
    "...#.#.............#...#.....#.",
    "...........#...#.#....#..#.#...",
    ".......#.#.#.....#..#........#.",
    "..##.....#..#.....##..#........",
    "...#.#..........#...#....#.#...",
    "..#....#......#...#.#...##..#.#",
    ".#...#..#..#..#.......#........",
    ".................#.#...........",
    "...............#......##.....#.",
    "..##.....###..#....#.........##",
    "....#.#........#.####.#...#....",
    ".....#.....##..####..##.......#",
    ".....####.#...#......#.........",
    "........#..#......#.....##.....",
    "...###..#.#..###.......#.......",
    "...#...##..#..#..#..#.##.......",
    "..#......##..#.....##..##......",
    "#.......#.#..#.................",
    "#.......#...#..###....#.#.#.#..",
    "#...#.#....##.##.#...........#.",
    ".#.........#..###..#.........#.",
    "#...#......#...#.#.........#...",
    ".#.##..............#.#....#...#",
    "........#.....#..#.#.#......#..",
    "............####.#......#......",
    "......#.#.#...#.#...#.#.....#..",
    "....#....#...#.....#.......#.#.",
    "..#....#....###..#....#.....##.",
    ".................#.....#.#....#",
    ".#.............#......#.##..#..",
    "#.....##.......#..#.....#....#.",
    "#.#......####...##.....#....##.",
    ".....#.#....#..................",
    "....#....#..#.#...........##...",
    "...#.............##......#..#..",
    "......#..........#...#...##.###",
    "...##......##.....#......#....#",
    "........#.#.#...#...#..##......",
    "......................###....##",
    ".#.....#..#..#.##.#.#.#....#.##",
    ".#..............#.....#......#.",
    ".#...#.##....#.....#.#.#..#..#.",
    "##...##.......#.....#..###.....",
    "...#..#.#....#........#........",
    "....#..............##...#......",
    "...........#..#.....##.#.#.#...",
    "#.#.....##..##.#.#........#....",
    ".........#....#.....#..##.#...#",
    "...#...#..#..#.####...#.......#",
    ".....##.....##.....#......#....",
    "#.##...#....#............#..##.",
    ".#.##..#...#....#.#......#.....",
    "..###................#.........",
    ".#..#..#................#......",
    "....#..#........#..#....#......",
    ".#..........###......#...###...",
    "...........##...#.#..#.........",
    "...#....#..........#.....#..##.",
    "..#..#.............#......###..",
    "#....#....##.....#....#.##.....",
    "......#.......#..#..........##.",
    "#..##.#...#.#.........#....#.#.",
    "...#...#..........#...#..#....#",
    "...###..#.#......#.##.#####...#",
    "..#.....#.#..............#..##.",
    "#..###......#.#..#........#....",
    ".#.......#.......#.....#.##....",
    ".#...##..#.......##.....#....##",
    "..........#.#..#.....#.........",
    ".......####...#...#.....##.....",
    "......#.......#.......#..#.#...",
    "...##....##.#.......#.##......#",
    ".#...#............#......##....",
    "#..#..#...#.#........#.........",
    ".......#.......#.....##.#......",
    ".#....##...#....#.........#...#",
    "#.#....#.....##...........#..#.",
    ".....#......#....#......#.#...#",
    ".#............#...#.#....#....#",
    "........##..#..##..##.##....#..",
    "........................#.#....",
    "#....#...#.....................",
    "##.#.............#.....#...##.#",
    "....##....###.......#..........",
    "..#.#..#.#...####.....#.....#..",
    "#.........#.......#......#..##.",
    ".#.#.............#..#...#...#..",
    "#..#....#....#..##.........#...",
    "#.#.....#.##.#...#.##..#.#..##.",
    "......#......#.###....#..###...",
    ".##...#.......#.........#.#...#",
    "..........#...#....#..#....#...",
    ".....#...#.....#....##....#.#..",
    "#....#...........#.#...#.......",
    ".###..#........##..........#...",
    "....###.##..#...#.#..##......##",
    ".#...#...........#...........#.",
    "#......#....#.##.........##..#.",
    ".#.......#........#......#.#.#.",
    ".......#..##.........#......#..",
    ".#..#.....##....##....#.....#..",
    "#.#.#.....#...#......#.........",
    "..............#.#.........#.#..",
    "....#...#.............#.#......",
    "..##.#............#.#.##....#..",
    ".....####..........#.#....##..#",
    "......#.#.........#.......###..",
    "#....##.#...#.#...........#...#",
    ".....#...#......#....###...#..#",
    "#....#..............#...#......",
    "...#..###...#..........#....#..",
    "#......#..#.#.#......#..#...#..",
    "................##......#..#...",
    "....#..#..#........##..#...#...",
    "...##.......#.##.#.....##...#.#",
    ".......#.##.#..#.....#...#.....",
    "......#........#..#......##.##.",
    "....................#.....#.#..",
    ".##....#...#...##...#.........#",
    "..#...#..#.##..#.#.#......#....",
    "#....###.#..#..#...#..#...##...",
    "#.......#.....#.#.......###.#.#",
    ".#.##...##..#......#....#...#..",
    "#.....#.......##..#....#.......",
    "...###...#............#....#..#",
    ".#....#.#...#..#..#.##.#.#.#...",
    "#......#.#..#.#.#......#.......",
    "..#..#....###.#........#..#.#..",
    ".......#......##.........#.....",
    "...#...###..#..#.##.#..##......",
    ".#.......##.......#..#..#.###.#",
    ".###.#..#.###...........#......",
    "...#................#.#...##..#",
    "....#.###....#.......#........#",
    ".##...#...#..#.....#...#.......",
    ".#...#..#...........#.#......##",
    "...##..#.#.#..#.#.#.......#....",
    ".#.#..#..#.#...........#.......",
    "..#....#.#.#.#.#..............#",
    "..##..............##....#.#..#.",
    "..#....#...##.....###.....#.#.#",
    "#....#......#..........##......",
    ".##.#.#......#...##..###..#....",
    ".#...........#.##.......##..##.",
    "###.....##...#.##..#...........",
    "...#.....#...........#..#.....#",
    "#.........#....#.......#.......",
    ".#.#...#.###....#..#...........",
    ".....#.......#.....#.##.#.#.#..",
    "..##.#.........##.........#..#.",
    ".......#....#......#.........##",
    "...##.....#..#.......#..#.#....",
    "..#...###.......#..#....###....",
    ".......#...###......#.#.....#.#",
    "#....#...#.#....#.#..........#.",
    "........#..#.....#.#.#.........",
    "......##.......###.......#...#.",
    ".........#..#..#.......#.......",
    "#.......#...#.....#.#..#....#..",
    ".##....#..###.............#....",
    "#.#...#.......#.....##.#.#....#",
    "....#....##.#........##........",
    "...##...#.#.............#...##.",
    "##....#.....#..#..#......#.....",
    "#...#.#........##....##......##",
    "..#...........#..#......###....",
    "..##..#.....#......#....##.....",
    "....###.#...#......##......#...",
    "....#....###...........###.#..#",
    "..#....#...#.##....#...#.......",
    "....##...........#............#",
    "..#.#......#......#.##.#...#..#",
    "#.###.............#.#.##.#.....",
    "#....##....#..#.#.#...........#",
    "...#...................#.......",
    ".#...#......#.......#.#....#..#",
    "....#...#..#..#..#.#.....#....#",
    "..#....#............#..###..##.",
    "...##...#...........#..#..#.#..",
    "..#..#..#.........#.........#.#",
    "...#.#.....#.#..##.........#...",
    "....#..........................",
    "....#.....#.#...#.###.........#",
    "....#.#.......#..#.#.#...#...#.",
    ".....#...#..#.....##....#.#.#..",
    "#....###......#..#..........#..",
    ".#.....#......##.......#...#.##",
    "...#..#.....#.#.....#.......##.",
    "............#..#....#...#..#.#.",
    "..........#.#..#..##...........",
    ".......#.......#..##...##.....#",
    "....#...##.#..#...#.#.......#..",
    "....#.#........#...####...#....",
    "#.#.............#.............#",
    ".#.#......#....#..#..#.....##.#",
    "#..#...........#........#.....#",
    "#....#....#.#..#.#....#.#...##.",
    "....##...##...#...#...........#",
    "...#.#..#....#..#..#..#........",
    "...#..##..#........#..........#",
    "#......#.##..##.......#..#.....",
    "..#...#......#...##.#..........",
    ".###.#..#..#........####...#...",
    "#..............#.#.#........#..",
    "..##....#.......#....##...#..##",
    ".##...#..#.#.....#..#.......##.",
    "..#.........##.......#....#..#.",
    ".#..#...#..##.#..#.....#.......",
    ".#....#.........#..#...#...##..",
    "..###..######..#.##.#....#.....",
    "....#..#.....#.............#..#",
    "...#....#.......#..#.#.......##",
    ".....#......#.......#..##...#..",
    ".##..#....##..##......#...#..#.",
    "......#......#...#...###.......",
    "....#.....#.###..##.....#.#.##.",
    ".......#....#...#..#..#...#.#..",
    "...####.#...#...#.#...##....#..",
    "......#.#....#....#.#....##....",
    "#..##...........####....##.#...",
    "...#...##.#.......#.#..........",
    "..#......#..#..#...#......#....",
    "..###..#.....#..#.#.......#...#",
    "#........#...##..#...#....#....",
    "...#.#...#.....#........#...#..",
    "...#....#.###...#..#...#..##.#.",
    ".....#..#..#...#...#..#........",
    "..#......##...............#.#.#",
    ".#...###.#....##..........#.#..",
]


class Solution:

    def count_trees_part_1(self) -> int:
        curr_idx = 0
        tree_count = 0

        for row in INPUT:
            if row[curr_idx] == "#":
                tree_count += 1

            curr_idx += 3  # move 3 to the right
            if curr_idx > 30:
                curr_idx = curr_idx - len(row)

        return tree_count

    def count_trees_part_2(self) -> int:
        slopes = [(1, 1), (3, 1), (5, 1), (7, 1), (1, 2)]
        tree_encounters = []

        for slope in slopes:
            curr_idx = 0
            tree_count = 0
            for row_idx in range(0, len(INPUT), slope[1]):
                if INPUT[row_idx][curr_idx] == "#":
                    tree_count += 1

                curr_idx += slope[0]  # move 3 to the right
                if curr_idx > 30:
                    curr_idx = curr_idx - len(INPUT[0])

            tree_encounters.append(tree_count)

        return reduce(lambda a, b: a*b, tree_encounters)


print(Solution().count_trees_part_1())
print(Solution().count_trees_part_2())

